{{ $font := .Params.font }}
{{ $fontCSSWght := printf `https://cdn.jsdelivr.net/gh/lazywasabi/thai-web-fonts@%s/fonts/%s/var/%s[wght].css` $.Site.Params.twfVersionMajor $font.namespace $font.namespace }}
{{ $fontCSSWdthWght := printf `https://cdn.jsdelivr.net/gh/lazywasabi/thai-web-fonts@%s/fonts/%s/var/%s[wdth,wght].css` $.Site.Params.twfVersionMajor $font.namespace $font.namespace }}
{{ $codeLinkWght := printf `<link href="%s" rel="stylesheet" />` $fontCSSWght }}
{{ $codeLinkWdthWght := printf `<link href="%s" rel="stylesheet" />` $fontCSSWdthWght }}
{{ $codeImportWght := printf `@import '%s';` $fontCSSWght }}
{{ $codeImportWdthWght := printf `@import '%s';` $fontCSSWdthWght }}
{{ $codeFontFace := "" }}

{{ define "partials/font-code-var-wght" }}
  <p class="mt-3">
    <strong class="fw-semibold">ฟอนต์นี้รองรับ Variable Fonts</strong>
    ปรับน้ำหนัก (weight) ได้
    <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_fonts/Variable_fonts_guide" target="_blank" rel="noopener noreferrer">ดูวิธีการใช้งาน</a>
  </p>
{{ end }}

{{ define "partials/font-code-var-wdthwght" }}
  <p class="mt-3">
    <strong class="fw-semibold">ฟอนต์นี้รองรับ Variable Fonts</strong>
    ปรับน้ำหนัก (weight) และความกว้าง (width) ได้
    <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_fonts/Variable_fonts_guide" target="_blank" rel="noopener noreferrer">ดูวิธีการใช้งาน</a>
  </p>
{{ end }}


<div class="twf-font-snippets twf-font-snippets-variable">
  <div class="nav nav-tabs" id="font-code" role="tablist">
    <button
      class="nav-link active"
      id="code-link-var-tab"
      data-bs-toggle="tab"
      data-bs-target="#code-link-var"
      type="button"
      role="tab"
      aria-controls="code-link-var"
      aria-selected="true"
    >
      &lt;link&gt;
    </button>
    <button
      class="nav-link"
      id="code-font-face-var-tab"
      data-bs-toggle="tab"
      data-bs-target="#code-font-face-var"
      type="button"
      role="tab"
      aria-controls="code-font-face-var"
      aria-selected="false"
    >
      @font-face
    </button>
    <button
      class="nav-link"
      id="code-import-var-tab"
      data-bs-toggle="tab"
      data-bs-target="#code-import-var"
      type="button"
      role="tab"
      aria-controls="code-import-var"
      aria-selected="false"
    >
      @import
    </button>
  </div>
  <div class="tab-content" id="font-codeVariable">
    <div
      class="tab-pane show active"
      id="code-link-var"
      role="tabpanel"
      aria-labelledby="code-link-var-tab"
      tabindex="0"
    >
      {{ if and $font.variable.width $font.variable.weight }}
        {{ partialCached "font-code-var-wdthwght" . }}
        {{ transform.Highlight $codeLinkWdthWght "html" }}
      {{ else if $font.variable.weight }}
        {{ partialCached "font-code-var-wght" . }}
        {{ transform.Highlight $codeLinkWght "html" }}
      {{ end }}
    </div>
    <div
      class="tab-pane"
      id="code-font-face-var"
      role="tabpanel"
      aria-labelledby="code-font-face-var-tab"
      tabindex="0"
    >
      {{ if and $font.variable.width $font.variable.weight }}
        {{ partialCached "font-code-var-wdthwght" . }}
        {{ $codeFontFace = trim ( partial "font/font-face-var.html" (dict "Page" $ "font" $font "variable" "wdth,wght") ) "\n" }}
      {{ else if $font.variable.weight }}
        {{ partialCached "font-code-var-wght" . }}
        {{ $codeFontFace = trim ( partial "font/font-face-var.html" (dict "Page" $ "font" $font "variable" "wght") ) "\n" }}
      {{ end }}
      {{ transform.Highlight $codeFontFace "css" }}
    </div>
    <div
      class="tab-pane"
      id="code-import-var"
      role="tabpanel"
      aria-labelledby="code-import-var-tab"
      tabindex="0"
    >
      {{ if and $font.variable.width $font.variable.weight }}
        {{ partialCached "font-code-var-wdthwght" . }}
        {{ transform.Highlight $codeImportWdthWght "css" }}
      {{ else if $font.variable.weight }}
        {{ partialCached "font-code-var-wght" . }}
        {{ transform.Highlight $codeImportWght "css" }}
      {{ end }}
    </div>
  </div>
</div>
